# 灵魂拷问

## 说说几种进程间通信方式的概念？

1. 管道（Pipe）：管道可用于具有亲缘关系进程间的通信，允许一个进程和另一个与它有共同祖先的进程之间进行通信。
2. 命名管道（named pipe）：命名管道克服了管道没有名字的限制，除具有管道所具有的功能外，它还允许无亲缘关系进程间的通信。
3. 信号（Signal）：信号是比较复杂的通信方式，用于通知接受进程有某种事件发生，除了用于进程间通信外，进程还可以发送 信号给进程本身。
4. 消息（Message）队列：消息队列是消息的链接表，包括Posix消息队列system V消息队列。
5. 共享内存：使得多个进程可以访问同一块内存空间，是最快的可用IPC形式。是针对其他通信机制运行效率较低而设计的。
6. 内存映射（mapped memory）：内存映射允许任何多个进程间通信，每一个使用该机制的进程通过把一个共享的文件映射到自己的进程地址空间来实现它。
7. 信号量（semaphore）：主要作为进程间以及同一进程不同线程之间的同步手段。
8. 套接口（Socket）：更为一般的进程间通信机制，可用于不同机器之间的进程间通信。

## 选择或设计IPC考要虑哪些前提？

1. 联网的还是非联网的。IPC适用于单台主机上的进程或线程间的。如果应用程序有可能分布到多台主机上，那就要考虑使用套接字代替IPC，从而简化以后向联 网的应用程序转移的工作。

2. 可移植性。

3. 性能，在具体的开发环境下运行测试程序，比较几种IPC的性能差异。

   * 带宽(bandwidth)：数据通过IPC通道转移的速度。为测量该值，我们从一个进程向另一个进程发送大量数据(几百万字节)。我们还给不同大小的 I/O操作(例如管道和FIFO的write和read操作)测量该值，期待发现带宽随每个I/O操作的数据量的增长而增长的规律。
   * 延迟(latency)：一个小的IPC消息从一个进程到令一个进程再返回来所花的时间.我们测量的是只有一个1个字节的消息从一个进程到令一个进程再回 来的时间（往返时间）

   在现实世界中，带宽告诉我们大块数据通过一个IPC通道发送出去需花多长时间,然而IPC也用于传递小的控制信息，系统处理这些小消息所需的时间就由延迟提供.这两个数都很重要。

4. 实时调度。如果需要这一特性，而且所用的系统也支持posix实时调度选项，那就考虑使用Posix的消息传递和同步函数。

## 不同IPC之间的一些主要差异？

1. 管道和FIFO是字节流,没有消息边界。Posix消息和System V消息则有从发送者向接受者维护的记录边界(eg:TCP是没有记录边界的字节流,UDP则提供具有记录边界的消息)。

2. 当有一个消息放置到一个空队列中时，Posix消息队列可向一个进程发送一个信号，或者启动一个新的线程.System V则不提供类似的通知形式。

3. 管道和FIFO的数据字节是先进先出的。Posix消息和System V消息具有由发送者赋予的优先级。从一个Posix消息队列读出时,首先返回的总是优先级最高的消息。从一个System V消息队列读出时，读出者可以要求想要的任意优先级的消息。

4. 在众多的消息传递技术—管道、FIFO、Posix消息队列和System V消息队列—中，可从一个信号处理程序中调用的函数只有read和write(适用于管道和FIFO)。