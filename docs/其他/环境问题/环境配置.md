# Git

## git bash中文显示成数字

<img src="环境配置.assets/image-20200308101918785.png" alt="image-20200308101918785" style="zoom:56.5%;" align="left" />

git config --global core.quotepath false

<img src="环境配置.assets/image-20200308102356539.png" alt="image-20200308102356539" style="zoom:56.5%;" align="left"/>



# Intellij环境配置问题

## Intellij Idea 配置copyright和类头

### copyright

File->Setting->Copyright->Copyright Profiles,点击+号按钮，输入合法的copyright信息，点击validate，合格后，点击apply；

点击上一层的Copyright，Default project copyright，选择刚刚创建的coptright后点击应用。

<img src="环境配置.assets/image-20200112133643179.png" alt="image-20200112133643179" style="zoom:31.7%;" align="left"/>

<img src="环境配置.assets/image-20200112133737974.png" alt="image-20200112133737974" style="zoom:31.7%;" align="left" />

### 类头信息

Editor下的File and Code Templates，然后点击右侧的Includes，选择File Header进行编辑，编辑的内容如右侧所示，然后点击Apply即可。

```
/**
 * @Description 
 * @author      Zhang Dezhou
 * @date        ${DATE} ${TIME}
 */
```

<img src="环境配置.assets/image-20200112134402519.png" alt="image-20200112134402519" style="zoom:31.7%;" align="left"/>



## 设置自动导包

首先，点击左上角的 “File”，选择 “settings”，或直接按快捷键Ctrl+Alt+s

选择“Editor”-“general”-“auto import”

在右侧将空勾选

<img src="环境配置.assets/image-20200112192606619.png" alt="image-20200112192606619" style="zoom:31.7%;" align="left" />



## 插件工具

### **1. ignore**

经常使用git的同学对于ignore一定不会陌生，我们可以在该文件中设置一些忽略提交的规则。

通过该插件可以生成各种ignore文件，一键创建git ignore文件的模板，解决了手动去配置的麻烦。

<img src="https:////upload-images.jianshu.io/upload_images/17890920-dd3e1ab8d9554c4d?imageMogr2/auto-orient/strip|imageView2/2/w/600/format/webp" alt="img" align="left"/>

### **2. p3c**

阿里巴巴出品的java代码规范插件

可以扫描整个项目 找到不规范的地方 并且大部分可以自动修复

更多可以查看 [https://github.com/alibaba/p3c/tree/master/idea-plugin](https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2Falibaba%2Fp3c%2Ftree%2Fmaster%2Fidea-plugin)

### **3. GsonFormat**

一键根据json文本生成java类 非常方便

<img src="环境配置.assets/17890920-980ace39358f90fb.webp" alt="img" align="left"/>

### **4. VisualVM Launcher**

运行java程序的时候启动visualvm，方便查看jvm的情况 比如堆内存大小的分配

某个对象占用了多大的内存，jvm调优必备工具

<img src="环境配置.assets/17890920-6cbcfbefa410a615.webp" alt="img" align="left" />

### 5. 时序图生成工具：SequenceDiagram

有的时候，我们需要梳理业务逻辑或者阅读源码。从中，我们需要了解整个调用链路，反向生成 UML 的时序图是强需求。其中，SequenceDiagram 插件是一个非常棒的插件。

官方详细介绍地址 https://plugins.jetbrains.com/plugin/8286-sequencediagram

比如：你想看某个方法的执行流程，可以选择右键这个方法接口或者方法实现

<img src="环境配置.assets/16c9af927bd51c21" alt="img" style="zoom:45%;" align="left"/>

立即生成时序图

<img src="环境配置.assets/16c8ae95926992d0" alt="img" style="zoom:32.8%;" align="left"/>

### 6. 快捷键提示工具：Key promoter X

官方详细介绍地址 https://plugins.jetbrains.com/plugin/9792-key-promoter-x

这个插件什么用呢？举个例子，你想看某个方法内部实现的时候，如果你不用快捷键，你会这样鼠标点：

<img src="环境配置.assets/16c8afe031c97d3b" alt="img" style="zoom:46%;" align="left"/>

如果你安装了这个插件，你每次这样鼠标点击后，开发工具右下角会提示你，使用快捷键：

<img src="环境配置.assets/16c8aff00f11466e" alt="img" style="zoom:120%" align="left" />

安装这个插件后，快捷键用的飞起来。

### 7. CodeGlance 插件

当你的类上千行的时候，在你往下拖拽找对象的时候，是不是感觉挺累的，有个这个插件，可以查看缩略图一样，快速切换到自己需要去的地方，飞翔的感觉。

官方详细介绍地址 https://github.com/Vektah/CodeGlance

安装后显示效果图如下：

<img src="环境配置.assets/16c8b05cb9f034b6" alt="img" style="zoom:77%" align="left"/>

### 8. JUnitGenerator V2.0 自动生成单元测试代码

编写单元测试是好的开发者的习惯，但是怎么提高你代码的效率，单元测试代码可否自动生成，这个插件就是帮我们做这事情。

修改JUnitGenerator V2.0 的配置，Settings下的 Other Settings 修改下模版和更新配置

<img src="环境配置.assets/16c8b14cb961e52d" alt="img" style="zoom:31.9%;" align="left"/>

设置成功后，就可以根据方法或者类生成单元测试模版了：

<img src="环境配置.assets/16c8b1788ad68bd4" alt="img" style="zoom:63%" align="left"/>

### 9. GenerateAllSetter 插件

当你进行对象之间赋值的时候，有没有觉得好麻烦，能不能有一个更好的办法呢~ 有，只要你选中需要生成set方法的对象，按下快捷键 alt+enter 界面如下：

<img src="环境配置.assets/16c8b37369a310b4" alt="img" style="zoom:65%" align="left"/>

有没有感觉很厉害， 官方详细介绍地址 https://plugins.jetbrains.com/plugin/9360-generateallsetter

### 10. sonarlint 代码质量管理

找出你的代码隐藏bug或者坏味道

官方详细介绍地址 http://intellij.sonarlint.org

可以选择你要执行的代码类或者项目执行就可以类，下面会列出结果和意见

<img src="环境配置.assets/16c8b3de261671b4" alt="img" style="zoom:75%" align="left"/>

### 11. CheckStyle

CheckStyle-IDEA

### 12. spellcheck

Grazie

Elixir

### 13.JavaDoc

# Visual Studio 环境配置

## 插件工具

### 设置tab为4空格

### 设置代码列限制线Editor Guidelines

https://marketplace.visualstudio.com/items?itemName=PaulHarrington.EditorGuidelines

### 安装代码规范检查工具Sonar

https://marketplace.visualstudio.com/items?itemName=SonarSource.SonarLintforVisualStudio2019



## Visual Studio+VAssistX自动添加注释，函数头注释，文件头注释

在VAssistX中为C++提供了比较规范注释模板，用这个注释模板为编写的C++代码添加注释是很便捷的选择，操作起来也很简单，具体方法和步骤如下：

### 1.增加函数头注释

<img src="环境配置.assets/20161026112749628" alt="这里写图片描述" style="zoom:80%" align="left"/>

之后注释模板中编辑自己需要的注释内容：

<img src="环境配置.assets/20161026112916035" alt="这里写图片描述" style="zoom:90%" align="left" />

编辑好注释模板之后将输入光标定位到需要添加注释的C++函数，然后右键进行添加

<img src="环境配置.assets/20161026113223782" alt="这里写图片描述" style="zoom:80%" align="left"/>

右击函数名，然后依次点击“Refacto”–>“Document Method”，这个时候函数头注释就会蹦出来，不过这个注释的格式是默认的，想修改注释格式，可以通过以下方法。

点击 “VAssistX”–>“Visual VAssistX Options”然后选择Suggestions,再点击“Edit VA Snippets”。
在打开的窗口中选择Refactor Document Method，在这就可以更改你的显示样式了。可以参照默认的注释格式来定制自己的注释：

```c++
/*!
*@brief  
*@author %USERNAME%
*@date   $YEAR$年$MONTH$月$DAY$日
*@param[out] 
*@param[in]  $MethodArg$  
*@return     $SymbolType$  
*/
```

### 2.增加文件头注释 

要想在文件头添加注释，需要
把鼠标光标定位到VS编辑器的第一行，点击 “VAssistX”–>“Insert VA Snippet…”—>“File Header Detail”，即可增加文件头注释。默认的注释格式如下，可以通过点击“VAssistX”–>“Visual VAssistX Options”—>“Advanced”—>“Suggestions”—>“Edit VA Snippets”，选择你相应语言的“File Header Detail”修改。

```c++
/********************************************************************
/*!
 * \file client.cpp
 *
 * \author TerryTian
 * \mail tianhaohust@gmail.com
 * \date 九月 2016
 *
 * 
 */
*********************************************************************/
```



# Ubuntu

## Window中删除ubuntu开机启动项

在Win10删除Ubuntu时直接删除分区后，对于启动项(EFI)的处理
 一、
 1、用win+R打开diskpart.exe
 2、输入list disk，查看磁盘状态
 3、根据容量选择win10系统盘：select disk 0
 4、输入list partition，查看分区情况
 5、选择类型为“系统”的分区：select partition 1
 6、输入assign letter=p，将该分区命名为“p”，出现在“我的电脑”中（可以到“我的电脑”中查看，但是即使以管理员权限也不能进入）

二、
 1、以管理员权限打开cmd
 2、此时可以用dos命令操作p盘：cd进入目录，dir查看目录，cd删除文件，rd删除文件夹（空），rd /s /q删除文件夹及文件
 3、下面为执行的命令
 （1）p:
 （2）dir
 （3）cd EFI
 （4）dir（此时能看到一个名为Ubuntu的文件夹）

 （5）rd /s /q ubuntu（注意空格）
 （6）dir（可以看到Ubuntu文件夹已经删除）
 （7）remove letter=p（在diskpart中运行;不再为p盘命名）



## Ubuntu切换阿里源

请注意：Ubuntu 20.04 已于4月23日发布正式版本。
请注意：发现有些软件比如ckermit，仓库里还没有，升级及换源自行斟酌。

### 1 备份原来的源

```
cp -ra /etc/apt/sources.list /etc/apt/sources.list.bak
```

### 2 搞清楚ubuntu的代号

比如：
4.10 Warty Warthog(长疣的疣猪)
5.04 Hoary Hedgehog(灰白的刺猬)
5.10 Breezy Badger(活泼的獾)

6.06(LTS) Dapper Drake(整洁的公鸭)
6.10 Edgy Eft(急躁的水蜥)
7.04 Feisty Fawn(坏脾气的小鹿)
7.10 Gutsy Gibbon(勇敢的长臂猿)

8.04(LTS) Hardy Heron(耐寒的苍鹭)
8.10 Intrepid Ibex (勇敢的野山羊)
9.04 Jaunty Jackalope(得意洋洋的怀俄明野兔)
9.10 Karmic Koala(幸运的考拉)

10.04(LTS) Lucid Lynx(清醒的猞猁)
10.10 Oneiric Ocelot(梦幻的豹猫)
11.04 Natty Narwhal(敏捷的独角鲸)
11.10 Oneiric Ocelot（有梦的虎猫）

12.04(LTS) Precise Pangolin(精准的穿山甲)
12.10 Quantal Quetzal(量子的绿咬鹃)
13.04 Raring Ringtail(铆足了劲的猫熊)
13.10 Saucy Salamander(活泼的蝾螈)

14.04(LTS) Trusty Tahr (可靠的塔尔羊)(LTS)
14.10 Utopic Unicorn(乌托邦独角兽)
15.04 Vivid Vervet (活泼的小猴)
15.10 Wily Werewolf (狡猾的狼人)

16.04(LTS) Xenial Xerus (好客的非洲地松鼠)
16.10 Yakkety Yak（牦牛）
17.04 Zesty Zapus(开心的跳鼠)
17.10 Artful Aardvark(机灵的土豚)

18.04(LTS) Bionic Beaver（仿生海狸）
18.10 Cosmic Cuttlefish（宇宙墨鱼）
19.04 Disco Dingo（舞动的灵犬）
19.10 Eoan Ermine（白貂）

20.04(LTS) Focal Fossa（专注的马达加斯加长尾狸猫）
…
要知道当前系统的代号，可以用以下命令：

```
lsb_release -a
```

### 3 检查阿里源看下这个源存在不存在

http://archive.ubuntu.com/ubuntu/dists/

可以看到，现在已经有了ubuntu 20.04(代号focal)的源。

### 4 然后以下面的为模板进行更换

把’TODO’的地方换成上面的Codename

```
deb http://mirrors.aliyun.com/ubuntu/ TODO main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ TODO main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ TODO-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ TODO-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ TODO-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ TODO-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ TODO-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ TODO-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ TODO-backports main restricted universe multiverse

deb-src http://mirrors.aliyun.com/ubuntu/ TODO-backports main restricted universe multiverse
```

换好20.04的源以后是这样：

```
deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
```


然后粘贴到刚才的/etc/apt/sources.list里。

### 5 更新缓存和升级

sudo apt-get update
sudo apt-get upgrade

# CentOs

## 安装JDK8

### 检查是否已安装及卸载

* 检查是否已安装

  > yum list installed | grep [java][jdk]

  ```
  java-1.8.0-openjdk.x86_64               1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-accessibility.x86_64 1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-demo.x86_64          1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-devel.x86_64         1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-headless.x86_64      1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-javadoc.noarch       1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-javadoc-zip.noarch   1:1.8.0.282.b08-1.el7_9        @updates 
  java-1.8.0-openjdk-src.x86_64           1:1.8.0.282.b08-1.el7_9        @updates 
  java-atk-wrapper.x86_64                 0.30.4-5.el7                   @base    
  javapackages-tools.noarch               3.4.1-11.el7                   @base    
  python-javapackages.noarch              3.4.1-11.el7                   @base    
  tzdata-java.noarch                      2021a-1.el7                    @updates 
  ```

* 卸载Java环境

  > yum -y remove java-1.8.0-openjdk*  //表时卸载所有openjdk相关文件输入 
  >
  > yum -y remove tzdata-java.noarch   //卸载tzdata-java

  

### 安装JDK

* 查看Java软件包列表

  > yum search java | grep -i --color jdk

  ```
  ldapjdk-javadoc.noarch : Javadoc for ldapjdk
  icedtea-web.x86_64 : Additional Java components for OpenJDK - Java browser
  java-1.6.0-openjdk.x86_64 : OpenJDK Runtime Environment
  java-1.6.0-openjdk-demo.x86_64 : OpenJDK Demos
  java-1.6.0-openjdk-devel.x86_64 : OpenJDK Development Environment
  java-1.6.0-openjdk-javadoc.x86_64 : OpenJDK API Documentation
  java-1.6.0-openjdk-src.x86_64 : OpenJDK Source Bundle
  java-1.7.0-openjdk.x86_64 : OpenJDK Runtime Environment
  java-1.7.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector
  java-1.7.0-openjdk-demo.x86_64 : OpenJDK Demos
  java-1.7.0-openjdk-devel.x86_64 : OpenJDK Development Environment
  java-1.7.0-openjdk-headless.x86_64 : The OpenJDK runtime environment without
  java-1.7.0-openjdk-javadoc.noarch : OpenJDK API Documentation
  java-1.7.0-openjdk-src.x86_64 : OpenJDK Source Bundle
  java-1.8.0-openjdk.i686 : OpenJDK Runtime Environment 8
  java-1.8.0-openjdk.x86_64 : OpenJDK 8 Runtime Environment
  java-1.8.0-openjdk-accessibility.i686 : OpenJDK accessibility connector
  java-1.8.0-openjdk-accessibility.x86_64 : OpenJDK accessibility connector
  java-1.8.0-openjdk-demo.i686 : OpenJDK Demos 8
  java-1.8.0-openjdk-demo.x86_64 : OpenJDK 8 Demos
  java-1.8.0-openjdk-devel.i686 : OpenJDK Development Environment 8
  java-1.8.0-openjdk-devel.x86_64 : OpenJDK 8 Development Environment
  java-1.8.0-openjdk-headless.i686 : OpenJDK Headless Runtime Environment 8
  java-1.8.0-openjdk-headless.x86_64 : OpenJDK 8 Headless Runtime Environment
  java-1.8.0-openjdk-javadoc.noarch : OpenJDK 8 API documentation
  java-1.8.0-openjdk-javadoc-zip.noarch : OpenJDK 8 API documentation compressed
  java-1.8.0-openjdk-src.i686 : OpenJDK Source Bundle 8
  java-1.8.0-openjdk-src.x86_64 : OpenJDK 8 Source Bundle
  java-11-openjdk.i686 : OpenJDK Runtime Environment 11
  java-11-openjdk.x86_64 : OpenJDK 11 Runtime Environment
  java-11-openjdk-demo.i686 : OpenJDK Demos 11
  java-11-openjdk-demo.x86_64 : OpenJDK 11 Demos
  java-11-openjdk-devel.i686 : OpenJDK Development Environment 11
  java-11-openjdk-devel.x86_64 : OpenJDK 11 Development Environment
  java-11-openjdk-headless.i686 : OpenJDK Headless Runtime Environment 11
  java-11-openjdk-headless.x86_64 : OpenJDK 11 Headless Runtime Environment
  java-11-openjdk-javadoc.i686 : OpenJDK 11 API documentation
  java-11-openjdk-javadoc.x86_64 : OpenJDK 11 API documentation
  java-11-openjdk-javadoc-zip.i686 : OpenJDK 11 API documentation compressed in a
  java-11-openjdk-javadoc-zip.x86_64 : OpenJDK 11 API documentation compressed in
  java-11-openjdk-jmods.i686 : JMods for OpenJDK 11
  java-11-openjdk-jmods.x86_64 : JMods for OpenJDK 11
  java-11-openjdk-src.i686 : OpenJDK Source Bundle 11
  java-11-openjdk-src.x86_64 : OpenJDK 11 Source Bundle
  java-11-openjdk-static-libs.i686 : OpenJDK libraries for static linking 11
  java-11-openjdk-static-libs.x86_64 : OpenJDK 11 libraries for static linking
  java-latest-openjdk.x86_64 : OpenJDK 15 Runtime Environment
  java-latest-openjdk-debug.x86_64 : OpenJDK 15 Runtime Environment with full
  java-latest-openjdk-demo.x86_64 : OpenJDK 15 Demos
  java-latest-openjdk-demo-debug.x86_64 : OpenJDK 15 Demos with full debugging on
  java-latest-openjdk-demo-fastdebug.x86_64 : OpenJDK 15 Demos with minimal
  java-latest-openjdk-devel.x86_64 : OpenJDK 15 Development Environment
  java-latest-openjdk-devel-debug.x86_64 : OpenJDK 15 Development Environment with
  java-latest-openjdk-devel-fastdebug.x86_64 : OpenJDK 15 Development Environment
  java-latest-openjdk-fastdebug.x86_64 : OpenJDK 15 Runtime Environment with
  java-latest-openjdk-headless.x86_64 : OpenJDK 15 Headless Runtime Environment
  java-latest-openjdk-headless-debug.x86_64 : OpenJDK 15 Runtime Environment with
  java-latest-openjdk-headless-fastdebug.x86_64 : OpenJDK 15 Runtime Environment
  java-latest-openjdk-javadoc.x86_64 : OpenJDK 15 API documentation
  java-latest-openjdk-javadoc-zip.x86_64 : OpenJDK 15 API documentation compressed
  java-latest-openjdk-jmods.x86_64 : JMods for OpenJDK 15
  java-latest-openjdk-jmods-debug.x86_64 : JMods for OpenJDK 15 with full
  java-latest-openjdk-jmods-fastdebug.x86_64 : JMods for OpenJDK 15 with minimal
  java-latest-openjdk-src.x86_64 : OpenJDK 15 Source Bundle
  java-latest-openjdk-src-debug.x86_64 : OpenJDK 15 Source Bundle for packages
  java-latest-openjdk-src-fastdebug.x86_64 : OpenJDK 15 Source Bundle
  java-latest-openjdk-static-libs.x86_64 : OpenJDK 15 libraries for static linking
  java-latest-openjdk-static-libs-debug.x86_64 : OpenJDK 15 libraries for static
  java-latest-openjdk-static-libs-fastdebug.x86_64 : OpenJDK 15 libraries for
  ldapjdk.noarch : The Mozilla LDAP Java SDK
  openprops.noarch : An improved java.util.Properties from OpenJDK
  ```

* 选择安装版本

  > yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel.x86_64 
  >
  > *#或者如下命令，安装jdk1.8.0的所有文件* 
  >
  > yum install -y java-1.8.0-openjdk

* 查看JDK是否安装成功

  > java -version

  ```
  openjdk version "1.8.0_282"
  OpenJDK Runtime Environment (build 1.8.0_282-b08)
  OpenJDK 64-Bit Server VM (build 25.282-b08, mixed mode)
  ```

### 环境配置

* JDK的默认安装路径是：/usr/lib/jvm

  ```
  $ ls /usr/lib/jvm
  java
  java-1.8.0
  java-1.8.0-openjdk
  java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64
  java-openjdk
  jre
  jre-1.8.0
  jre-1.8.0-openjdk
  jre-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64
  jre-openjdk
  ```

* 在`/etc/profile`文件添加如下命令

  ```
  # set java environment  
  JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-3.b13.el7_5.x86_64
  PATH=$PATH:$JAVA_HOME/bin  
  CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar  
  export JAVA_HOME CLASSPATH PATH
  ```

* 保存关闭`profile`文件，执行如下命令生效

  ```
  source  /etc/profile
  ```

* 使用如下命令，查看`JDK`变量

  ```
  echo $JAVA_HOME
  echo $PATH
  echo $CLASSPATH
  ```

## 安装Tomcat

###　安装

* yum -y install tomcat

* 查看Tomcat是否安装成功 

  > rpm -q tomcat

  出现如下所示表示安装成功：

  ```
  tomcat-7.0.76-16.el7_9.noarch
  ```

### 环境变量

Tomcat的默认安装路径是/usr/share/tomcat

```
$ ls -l /usr/share/tomcat
total 4
drwxr-xr-x 2 root root   4096 Mar  6 17:16 bin
lrwxrwxrwx 1 root tomcat   11 Mar  6 17:16 conf -> /etc/tomcat
lrwxrwxrwx 1 root tomcat   22 Mar  6 17:16 lib -> /usr/share/java/tomcat
lrwxrwxrwx 1 root tomcat   15 Mar  6 17:16 logs -> /var/log/tomcat
lrwxrwxrwx 1 root tomcat   22 Mar  6 17:16 temp -> /var/cache/tomcat/temp
lrwxrwxrwx 1 root tomcat   23 Mar  6 17:16 webapps -> /var/lib/tomcat/webapps
lrwxrwxrwx 1 root tomcat   22 Mar  6 17:16 work -> /var/cache/tomcat/work
```

* 在`/etc/profile`配置文件中加入`Tomcat`环境变量

  ```
  CATALINA_BASE=/usr/share/tomcat
  CATALINA_HOME=/usr/share/tomcat
  export JAVA_HOME PATH CLASSPATH CATALINA_BASE CATALINA_HOME
  ```

* 保存并关闭`profile`文件，执行如下命令生效

  ```
  source /etc/profile
  ```

* 使用如下命令常看Tomcat环境变量

  ```
  echo $CATALINA_BASE
  echo $CATALINA_HOME
  ```

### 启动

* 启动tomcat

  ```
  systemctl start tomcat
  ```

* 查看tomcat是否启动成功

  ```
  $ systemctl status tomcat
  ● tomcat.service - Apache Tomcat Web Application Container
     Loaded: loaded (/usr/lib/systemd/system/tomcat.service; enabled; vendor preset: disabled)
     Active: active (running) since Sun 2021-03-07 00:09:00 CST; 14h ago
   Main PID: 5213 (java)
     CGroup: /system.slice/tomcat.service
             └─5213 /usr/lib/jvm/jre/bin/java -Djavax.sql.DataSource.Factory=o...
  ```

  表明tomcat已经启动起来了

* 在浏览器输入IP`192.168.137.138:8080`，即可访问

### 问题

在浏览器输入http://IP:8080，无法访问

# 云服务器配置

## Tomcat安装后公网无法访问

Tomcat默认8080断后访问，输入http://ip:8080后无法访问

### 不能访问的原因

* 因为前面安装的是 tomcat 的基础服务，并没有安装浏览器管理界面，接下来我们需要安装管理包

* 执行命令firewall-cmd --zone=public --add-port=8080/tcp --permanent 永久开放8080端口，否则会导致无法访问

* 开放8080后执行 systemctl restart firewalld.service重启防火墙
* 云服务器防火墙没有开放8080端口

### 设置开机启动

```
systemctl enable tomcat.service
```

### 安装`Tomcat`管理包

* 安装Tomcat根页面（tomcat-webapps）和Tomcat Web应用程序管理器和Virtual Host Manager（tomcat-admin-webapps），请运行以下命令：

  ```
  yum install -y tomcat-webapps tomcat-admin-webapps 
  ```

* 安装在线文档（可选）

  ```
  yum install -y tomcat-docs-webapp tomcat-javadoc
  ```

* 安装完成后，检查/usr/share/tomcat/webapps目录是否存在如下文件夹

  ```
  $ ls /usr/share/tomcat/webapps
  examples  host-manager  manager  ROOT  sample
  ```

### 配置Tomcat Web管理界面

* 为了使用在上一步安装的manager webapp，我们必须添加一个登录到我们的Tomcat服务器。然后修改tomcat-users.xml的文件
  vim /usr/share/tomcat/conf/tomcat-users.xml

* 要新增谁可以访问用户manager-gui和admin-gui （前面我们安装了管理接口）。您可以通过定义类似于以下示例的用户来执行此操作。请务必将用户名和密码更改为安全：
  tomcat-users.xml – 管理用户

  ```xml
  <tomcat-users>
     <user username="admin" password="password" roles="manager-gui,admin-gui"/>
  </tomcat-users>
  ```

* 保存并关闭tomcat-users.xml 文件, 重启Tomcat服务
  sudo systemctl restart tomcat

### 开放云服务器防火墙的8080端口

以阿里云轻量应用服务器为例

* 登录swas.console.aliyun.com

  <img src="环境配置.assets/image-20210307145055286.png" alt="image-20210307145055286" style="zoom:20%;" align="left"/>

* 点击相应的服务器，点击左侧栏的安全->防火墙，点击右上角的“添加规则”后在“端口范围”中输入8080后确定

  <img src="环境配置.assets/image-20210307145302484.png" alt="image-20210307145302484" style="zoom:20%;" align="left"/>

* 浏览器地址栏中再次输入http://ip:8080后成功访问

  <img src="环境配置.assets/image-20210307145548689.png" alt="image-20210307145548689" style="zoom:20%;" align="left"/>



## 宝塔面板安装后公网无法访问

和上面的tomcat公网无法访问的情况类似，在云服务器防火墙中把宝塔默认的8888端口放开即可

<img src="环境配置.assets/image-20210307145806159.png" alt="image-20210307145806159" style="zoom:21%;" align="left"/>